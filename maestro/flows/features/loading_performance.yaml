# Feature Flow: Loading and Performance Tests
# Tests loading states, shimmer effects, and performance scenarios

appId: ${APP_ID}
---

# Start app and monitor initial loading
- launchApp
- wait: ${timeouts.short}

# Monitor splash screen loading
- assertVisible:
    when:
      visible:
        id: "splash_screen"
    id: "splash_screen"

# Wait for app to load completely
- wait:
    visible:
      id: "main_tab_view"
    timeout: ${timeouts.network}

# Test home loading performance
- tapOn:
    text: "Anasayfa"
- wait: ${timeouts.short}

# Check for shimmer/loading indicators
- assertVisible:
    when:
      visible:
        id: "place_shimmer_list"
    id: "place_shimmer_list"
- takeScreenshot: "home_loading_shimmer"

# Wait for content to load
- wait:
    notVisible:
      id: "place_shimmer_list"
    timeout: ${timeouts.network}

# Test community loading
- tapOn:
    text: "Topluluk"
- wait: ${timeouts.short}

# Check for loading indicators
- assertVisible:
    when:
      visible:
        id: "loading_indicator"
    id: "loading_indicator"

# Wait for community content
- wait:
    notVisible:
      id: "loading_indicator"
    timeout: ${timeouts.network}

# Test news tab loading
- tapOn:
    text: "Haberler"
- wait: ${timeouts.short}

# Check news loading
- wait:
    notVisible:
      id: "loading_indicator"
    timeout: ${timeouts.network}

# Test events tab loading
- tapOn:
    text: "Etkinlikler"
- wait: ${timeouts.short}

# Check events loading
- wait:
    notVisible:
      id: "loading_indicator"
    timeout: ${timeouts.network}

# Test memories loading
- tapOn:
    text: "HatÄ±ralar"
- wait: ${timeouts.short}

# Check for photo grid loading
- wait:
    notVisible:
      id: "loading_indicator"
    timeout: ${timeouts.network}

# Test favorites loading
- tapOn:
    text: "Favoriler"
- wait: ${timeouts.short}

# Wait for favorites to load
- wait:
    notVisible:
      id: "loading_indicator"
    timeout: ${timeouts.network}

# Test search loading performance
- tapOn:
    text: "Anasayfa"
- wait: ${timeouts.short}

- tapOn:
    when:
      visible:
        id: "search_field"
    id: "search_field"
- inputText: "test"
- wait: ${timeouts.short}

# Monitor search results loading
- wait:
    notVisible:
      id: "search_loading_indicator"
    timeout: ${timeouts.medium}

# Test filter loading
- tapOn:
    when:
      visible:
        id: "filter_button"
    id: "filter_button"
- wait: ${timeouts.medium}

# Check category loading in filter
- wait:
    notVisible:
      id: "category_loading_indicator"
    timeout: ${timeouts.network}

# Go back
- tapOn:
    when:
      visible:
        id: "back_button"
    id: "back_button"

# Test refresh functionality performance
- swipeDown
- wait: ${timeouts.short}

# Monitor refresh loading
- wait:
    notVisible:
      id: "refresh_indicator"
    timeout: ${timeouts.network}

# Test app resume performance
- tapOn:
    text: "Topluluk"
- tapOn:
    text: "Anasayfa"
- wait: ${timeouts.short}

# Final performance verification
- takeScreenshot: "performance_test_completed"
