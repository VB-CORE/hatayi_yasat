# Home Page Functionality Test
# Comprehensive testing of home page features and UI elements
# maestro test -c flows/features/home_functionality.yaml

appId: com.hatayiyasat.app
---

# Load all page object elements
- runFlow: ../../elements/loadElements.yaml

# Launch app and navigate to home
- launchApp

# Wait for splash screen
- assertVisible:
    id: ${output.home.splashView}

# Wait for main view
- waitForAnimationToEnd
- assertVisible:
    id: ${output.home.mainTabView}

# Verify home view components
- assertVisible:
    id: ${output.home.homeView}
- assertVisible:
    id: ${output.home.homeScrollView}

# Test app bar and title
- assertVisible:
    id: ${output.home.homeSliverAppBar}
- assertVisible:
    id: ${output.home.homePlacesTitle}

# Test search and filter section
- assertVisible:
    id: ${output.home.homeSearchFilterRow}
- assertVisible:
    id: ${output.home.homeSearchField}
- assertVisible:
    id: ${output.home.homeFilterButton}

# Test search field interaction
- tapOn:
    id: ${output.home.homeSearchField}
- waitForAnimationToEnd
- assertVisible:
    text: "Mekan ara"
- pressKey: Back

# Test filter functionality
- tapOn:
    id: ${output.home.homeFilterButton}
- waitForAnimationToEnd
- assertVisible:
    text: "Filtrele"
- pressKey: Back

# Test sort and view controls
- assertVisible:
    id: ${output.home.homeSortGridView}
- assertVisible:
    id: ${output.home.homeViewDesignButton}
- assertVisible:
    id: ${output.home.homeSortPlaceButton}

# Test view design toggle (grid/list)
- tapOn:
    id: ${output.home.homeViewDesignButton}
- waitForAnimationToEnd
- tapOn:
    id: ${output.home.homeViewDesignButton}
- waitForAnimationToEnd

# Test sort functionality
- tapOn:
    id: ${output.home.homeSortPlaceButton}
- waitForAnimationToEnd
- assertVisible:
    text: "En Yeni"
- tapOn:
    text: "En Eski"
- waitForAnimationToEnd

# Test categories section (if available)
- optional:
    assertVisible:
      id: ${output.home.homeCategoriesSection}
- optional:
    assertVisible:
      id: ${output.home.homeCategoriesList}
- optional:
    tapOn:
      id: ${output.home.categoryCard}
- optional:
    waitForAnimationToEnd
- optional:
    pressKey: Back

# Test places section
- assertVisible:
    id: ${output.home.homePlaceAreaList}

# Test place card interactions
- tapOn:
    id: ${output.home.placeCard.gridCard}
- waitForAnimationToEnd

# Verify place detail elements
- assertVisible:
    id: ${output.home.button.phone}
- assertVisible:
    id: ${output.home.button.road}

# Test call button
- tapOn:
    id: ${output.home.button.phone}
- waitForAnimationToEnd
- pressKey: Back

# Test direction button  
- tapOn:
    id: ${output.home.button.road}
- waitForAnimationToEnd
- pressKey: Back

# Return to home
- pressKey: Back
- waitForAnimationToEnd

# Test scroll behavior
- scroll:
    startCoordinate: [50%, 80%]
    endCoordinate: [50%, 20%]
- waitForAnimationToEnd

- scroll:
    startCoordinate: [50%, 20%]
    endCoordinate: [50%, 80%]
- waitForAnimationToEnd

# Test FAB functionality
- tapOn:
    id: ${output.home.floatingActionButton}
- waitForAnimationToEnd
- assertVisible:
    text: "Åžirket Ekle"

# Close FAB
- tapOn:
    id: ${output.home.floatingActionButton}
- waitForAnimationToEnd

# Final verification
- assertVisible:
    id: ${output.home.homeView}
- takeScreenshot: "home_functionality_test_completed"
